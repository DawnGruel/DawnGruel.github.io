# Initå‡½æ•°å’Œmainå‡½æ•°ä»¥åŠGoçš„å‘½ä»¤

## initå‡½æ•°

Goè¯­è¨€ä¸­ `init` å‡½æ•°ç”¨äºåŒ… `(package)` çš„åˆå§‹åŒ–ï¼Œè¯¥å‡½æ•°æ˜¯goè¯­è¨€çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚

æœ‰ä¸‹é¢çš„ç‰¹å¾ï¼š

> 1.initéŸ©å¼æ˜¯ç”¨äºç¨‹åºæ‰§è¡Œå‰åšåŒ…çš„åˆå§‹åŒ–çš„å‡½æ•°ï¼Œæ¯”å¦‚åˆå§‹åŒ–åŒ…é‡Œçš„å˜é‡ç­‰  
> 2. æ¯ä¸ªåŒ…å¯ä»¥æ‹¥æœ‰å¤šä¸ªinitå‡½æ•°  
> 3. åŒ…çš„æ¯ä¸ªæºæ–‡ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰å¤šä¸ªinitå‡½æ•°  
> 4. åŒä¸€ä¸ªåŒ…ä¸­å¤šä¸ªinitå‡½æ•°çš„æ‰§è¡Œé¡ºåºgoè¯­è¨€æ²¡å“Ÿæ˜ç¡®å®šä¹‰ï¼ˆè¯´æ˜ï¼‰  
> 5. ä¸åŒåŒ…çš„initå‡½æ•°æŒ‰ç…§åŒ…å¯¼å…¥çš„ä¾èµ–å…³ç³»å†³å®šè¯¥åˆå§‹åŒ–å‡½æ•°çš„æ‰§è¡Œé¡ºåº  
> 6.initå‡½æ•°ä¸èƒ½è¢«å…¶ä»–å‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨mainå‡½æ•°æ‰§è¡Œå‰ï¼Œè‡ªåŠ¨è¢«è°ƒç”¨  

## mainå‡½æ•°

main å‡½æ•°æ˜¯æ¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ‰€å¿…é¡»åŒ…å«çš„ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯åœ¨å¯åŠ¨åç¬¬ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°ï¼ˆå¦‚æœæœ‰ init () å‡½æ•°åˆ™ä¼šå…ˆæ‰§è¡Œè¯¥å‡½æ•°ï¼‰ã€‚

```go
func main() {
  // å‡½æ•°ä½“
}
```

å¦‚æœä½ çš„ main åŒ…çš„æºä»£ç æ²¡æœ‰åŒ…å« main å‡½æ•°ï¼Œåˆ™ä¼šå¼•å‘æ„å»ºé”™è¯¯ `undefined: main.main` ã€‚

main å‡½æ•°æ—¢æ²¡æœ‰å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›ç±»å‹ï¼ˆä¸ C å®¶æ—ä¸­çš„å…¶å®ƒè¯­è¨€æ°å¥½ç›¸åï¼‰ã€‚

å¦‚æœä½ ä¸å°å¿ƒä¸º main å‡½æ•°æ·»åŠ äº†å‚æ•°æˆ–è€…è¿”å›ç±»å‹ï¼Œå°†ä¼šå¼•å‘æ„å»ºé”™è¯¯ï¼š

```sh
func main must have no arguments and no return values results.
```

åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œå¹¶å®Œæˆåˆå§‹åŒ–åï¼Œç¬¬ä¸€ä¸ªè°ƒç”¨ï¼ˆç¨‹åºçš„å…¥å£ç‚¹ï¼‰çš„å‡½æ•°æ˜¯ `main.main()` ï¼ˆå¦‚ï¼šC è¯­è¨€ï¼‰ï¼Œè¯¥å‡½æ•°ä¸€æ—¦è¿”å›å°±è¡¨ç¤ºç¨‹åºå·²æˆåŠŸæ‰§è¡Œå¹¶ç«‹å³é€€å‡ºã€‚

## initå‡½æ•°å’Œmainå‡½æ•°çš„å¼‚åŒ

```
ç›¸åŒç‚¹ï¼š
  ä¸¤ä¸ªå‡½æ•°çš„å­—å•Šå®šä¹‰æ—¶ä¸èƒ½æœ‰ä»»ä½•çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œä¸”Goç¨‹åºè‡ªåŠ¨è°ƒç”¨ã€‚

ä¸åŒç‚¹ï¼š
  initå¯ä»¥åº”ç”¨ä¸ä»»ä½•åŒ…ä¸­ï¼Œä¸”å¯ä»¥é‡å¤å®šä¹‰å¤šä¸ªã€‚
  mainå‡½æ•°åªèƒ½ç”¨äºmainåŒ…ä¸­ï¼Œä¸”åªèƒ½å®šä¹‰ä¸€ä¸ªã€‚

```

ä¸¤ä¸ªå‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼š

å¯¹åŒä¸€ä¸ªGoæ–‡ä»¶çš„init()è°ƒç”¨é¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹çš„ã€‚
å¯¹åŒä¸€packageä¸­ä¸åŒæ–‡ä»¶æ˜¯æŒ‰æ–‡ä»¶ååå­—å­—ç¬¦ä¸²æ¯”è¾ƒâ€œä»å°åˆ°å¤§â€é¡ºåºè°ƒç”¨å„æ–‡ä»¶ä¸­çš„ `init()` å‡½æ•°ã€‚

å¯¹äºä¸åŒçš„ `package` ï¼Œå¦‚æœä¸äº’ç›¸ä¾èµ–çš„è¯ï¼ŒæŒ‰ç…§mainåŒ…ä¸­å…ˆ `import` çš„åè°ƒç”¨ çš„é¡ºåºè°ƒç”¨å…¶åŒ…ä¸­çš„ `init()` ï¼Œå¦‚æœ `package` å­˜åœ¨ä¾èµ–ï¼Œåˆ™å…ˆè°ƒç”¨æœ€æ—©è¢«ä¾èµ–çš„ `package` ä¸­çš„ `init()` ï¼Œæœ€åè°ƒç”¨ `main()` å‡½æ•°ã€‚

å¦‚æœinitå‡½æ•°ä¸­ä½¿ç”¨äº† `println()` æˆ–è€… `print()` ä½ ä¼šå‘ç°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¿™ä¸¤ä¸ªä¸ä¼šæŒ‰ç…§ä½ æƒ³è±¡ä¸­çš„é¡ºåºæ‰§è¡Œã€‚è¿™ä¸¤ä¸ªå‡½æ•°å®˜æ–¹åªæ¨èåœ¨æµ‹è¯•ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¯¹äºæ­£å¼ç¯å¢ƒä¸è¦ä½¿ç”¨ã€‚

## ä¸€èˆ¬ç»“æ„ç®€è¿°

```go{ }
package main

import (
   "fmt"
)

const c = "C"

var v int = 5

type T struct{}

func init() { // initialization of package
}

func main() {
   var a int
   Func1()
   // ...
   fmt. Println(a)
}

func (t T) Method1() {
   //...
}

func Func1() { // exported function Func1
   //...
}

```

ğŸ‘†çš„ç¨‹åºå¯ä»¥è¢«é¡ºåˆ©ç¼–è¯‘ä½†ä»€ä¹ˆéƒ½åšä¸äº†ï¼Œä¸è¿‡è¿™å¾ˆå¥½åœ°å±•ç¤ºäº†ä¸€ä¸ª Go ç¨‹åºçš„é¦–é€‰ç»“æ„ã€‚è¿™ç§ç»“æ„å¹¶æ²¡æœ‰è¢«å¼ºåˆ¶è¦æ±‚ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸å…³å¿ƒ `main` å‡½æ•°åœ¨å‰è¿˜æ˜¯å˜é‡çš„å£°æ˜åœ¨å‰ï¼Œä½†ä½¿ç”¨ç»Ÿä¸€çš„ç»“æ„èƒ½å¤Ÿåœ¨ä»ä¸Šè‡³ä¸‹é˜…è¯» Go ä»£ç æ—¶æœ‰æ›´å¥½çš„ä½“éªŒã€‚

#### æ€»ä½“æ€è·¯å¦‚ä¸‹:

> * åœ¨å®ŒæˆåŒ…çš„ import ä¹‹åï¼Œå¼€å§‹å¯¹å¸¸é‡ã€å˜é‡å’Œç±»å‹çš„å®šä¹‰æˆ–å£°æ˜ã€‚  
> * å¦‚æœå­˜åœ¨ init å‡½æ•°çš„è¯ï¼Œåˆ™å¯¹è¯¥å‡½æ•°è¿›è¡Œå®šä¹‰ï¼ˆè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œæ¯ä¸ªå«æœ‰è¯¥å‡½æ•°çš„åŒ…éƒ½ä¼šé¦–å…ˆæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼‰ã€‚  
> * å¦‚æœå½“å‰åŒ…æ˜¯ main åŒ…ï¼Œåˆ™å®šä¹‰ main å‡½æ•°ã€‚  
> * ç„¶åå®šä¹‰å…¶ä½™çš„å‡½æ•°ï¼Œé¦–å…ˆæ˜¯ç±»å‹çš„æ–¹æ³•ï¼Œæ¥ç€æ˜¯æŒ‰ç…§ main å‡½æ•°ä¸­å…ˆåè°ƒç”¨çš„é¡ºåºæ¥å®šä¹‰ç›¸å…³å‡½æ•°ï¼Œå¦‚æœæœ‰å¾ˆå¤šå‡½æ•°ï¼Œåˆ™å¯ä»¥æŒ‰ç…§å­—æ¯é¡ºåºæ¥è¿›è¡Œæ’åºã€‚  

#### ç¨‹åºçš„æ‰§è¡Œï¼ˆç¨‹åºå¯åŠ¨ï¼‰é¡ºåºå¦‚ä¸‹ï¼š

> * æŒ‰é¡ºåºå¯¼å…¥æ‰€æœ‰è¢« main åŒ…å¼•ç”¨çš„å…¶å®ƒåŒ…ï¼Œç„¶ååœ¨æ¯ä¸ªåŒ…ä¸­æ‰§è¡Œå¦‚ä¸‹æµç¨‹ï¼š  
> * å¦‚æœè¯¥åŒ…åˆå¯¼å…¥äº†å…¶å®ƒçš„åŒ…ï¼Œåˆ™ä»ç¬¬ä¸€æ­¥å¼€å§‹é€’å½’æ‰§è¡Œï¼Œä½†æ˜¯æ¯ä¸ªåŒ…åªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ã€‚  
> * ç„¶åä»¥ç›¸åçš„é¡ºåºåœ¨æ¯ä¸ªåŒ…ä¸­åˆå§‹åŒ–å¸¸é‡å’Œå˜é‡ï¼Œå¦‚æœè¯¥åŒ…å«æœ‰ init å‡½æ•°çš„è¯ï¼Œåˆ™è°ƒç”¨è¯¥å‡½æ•°ã€‚  
> * åœ¨å®Œæˆè¿™ä¸€åˆ‡ä¹‹åï¼Œmain ä¹Ÿæ‰§è¡ŒåŒæ ·çš„è¿‡ç¨‹ï¼Œæœ€åè°ƒç”¨ main å‡½æ•°å¼€å§‹æ‰§è¡Œç¨‹åºã€‚  


## å‘½ä»¤

golangç¯å¢ƒå®‰è£…åï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œgoå‘½ä»¤æŸ¥çœ‹ç›¸å…³çš„Goè¯­è¨€å‘½ä»¤ï¼š

```sh
$ go
Go is a tool for managing Go source code.

Usage:

    go command [arguments]

The commands are:

    build       compile packages and dependencies
    clean       remove object files
    doc         show documentation for package or symbol
    env         print Go environment information
    bug         start a bug report
    fix         run go tool fix on packages
    fmt         run gofmt on package sources
    generate    generate Go files by processing source
    get         download and install packages and dependencies
    install     compile and install packages and dependencies
    list        list packages
    run         compile and run Go program
    test        test packages
    tool        run specified go tool
    version     print Go version
    vet         run go tool vet on packages

Use "go help [command]" for more information about a command.

Additional help topics:

    c           calling between Go and C
    buildmode   description of build modes
    filetype    file types
    gopath      GOPATH environment variable
    environment environment variables
    importpath  import path syntax
    packages    description of package lists
    testflag    description of testing flags
    testfunc    description of testing functions

Use "go help [topic]" for more information about that topic.
```

go envç”¨äºæ‰“å°Goè¯­è¨€çš„ç¯å¢ƒä¿¡æ¯ 

go runå‘½ä»¤å¯ä»¥ç¼–è¯‘å¹¶è¿è¡Œå‘½ä»¤æºç æ–‡ä»¶

go getå¯ä»¥æ ¹æ®è¦æ±‚å’Œå®é™…æƒ…å†µä»äº’è”ç½‘ä¸Šä¸‹è½½æˆ–æ›´æ–°æŒ‡å®šçš„ä»£ç åŒ…åŠå…¶ä¾èµ–åŒ…ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œç¼–è¯‘å’Œå®‰è£…

go buildå‘½ä»¤ç”¨äºç¼–è¯‘æˆ‘ä»¬æŒ‡å®šçš„æºç æ–‡ä»¶æˆ–ä»£ç åŒ…ä»¥åŠå®ƒä»¬çš„ä¾èµ–åŒ…

go installç”¨äºç¼–è¯‘å¹¶å®‰è£…æŒ‡å®šçš„ä»£ç åŒ…åŠå®ƒä»¬çš„ä¾èµ–åŒ…

go cleanå‘½ä»¤ä¼šåˆ é™¤æ‰æ‰§è¡Œå…¶å®ƒå‘½ä»¤æ—¶äº§ç”Ÿçš„ä¸€äº›æ–‡ä»¶å’Œç›®å½•

go docå‘½ä»¤å¯ä»¥æ‰“å°é™„äºGoè¯­è¨€ç¨‹åºå®ä½“ä¸Šçš„æ–‡æ¡£ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŠŠç¨‹åºå®ä½“çš„æ ‡è¯†ç¬¦ä½œä¸ºè¯¥å‘½ä»¤çš„å‚æ•°æ¥è¾¾åˆ°æŸ¥çœ‹å…¶æ–‡æ¡£çš„ç›®çš„

go testå‘½ä»¤ç”¨äºå¯¹Goè¯­è¨€ç¼–å†™çš„ç¨‹åºè¿›è¡Œæµ‹è¯•

go listå‘½ä»¤çš„ä½œç”¨æ˜¯åˆ—å‡ºæŒ‡å®šçš„ä»£ç åŒ…çš„ä¿¡æ¯

go fixä¼šæŠŠæŒ‡å®šä»£ç åŒ…çš„æ‰€æœ‰Goè¯­è¨€æºç æ–‡ä»¶ä¸­çš„æ—§ç‰ˆæœ¬ä»£ç ä¿®æ­£ä¸ºæ–°ç‰ˆæœ¬çš„ä»£ç 

go vetæ˜¯ä¸€ä¸ªç”¨äºæ£€æŸ¥Goè¯­è¨€æºç ä¸­é™æ€é”™è¯¯çš„ç®€å•å·¥å…·

go tool pprofå‘½ä»¤æ¥äº¤äº’å¼çš„è®¿é—®æ¦‚è¦æ–‡ä»¶çš„å†…å®¹

[Pascalå‘½åæ³•]:https://baike.baidu.com/item/%E5%B8%95%E6%96%AF%E5%8D%A1%E5%91%BD%E5%90%8D%E6%B3%95/9464494
